# Catalog Agent Configuration
# ============================
# This agent provides schema resolution, metadata lookup, and lineage information

agent:
  name: catalog-agent
  version: "1.0.0"
  description: "Resolves data schemas, metadata, and lineage from the enterprise catalog"

  # Agent identification
  id: catalog-agent-001
  type: metadata-provider

# Server configuration
server:
  host: 0.0.0.0
  port: 8082
  tls:
    enabled: true
    cert: ../../certs/catalog-agent.crt
    key: ../../certs/catalog-agent.key
    ca: ../../certs/ca.crt

# Capabilities this agent provides
capabilities:
  - name: catalog.resolve
    description: "Resolve schema information for a given question or table reference"
    inputSchema:
      type: object
      properties:
        question:
          type: string
          description: "Natural language question to extract table/column references"
        tables:
          type: array
          items:
            type: string
          description: "Explicit list of table names to resolve"
      # At least one of question or tables must be provided
    outputSchema:
      type: object
      properties:
        tables:
          type: array
          items:
            type: string
        columns:
          type: object
          description: "Map of table name to column list"
        joins:
          type: array
          items:
            type: object
            properties:
              from:
                type: string
              to:
                type: string

  - name: catalog.lineage
    description: "Get upstream and downstream lineage for specified tables"
    inputSchema:
      type: object
      properties:
        tables:
          type: array
          items:
            type: string
      required:
        - tables
    outputSchema:
      type: object
      properties:
        upstream:
          type: array
          items:
            type: string
        downstream:
          type: array
          items:
            type: string

  - name: catalog.search
    description: "Search for tables and columns by name or description"
    inputSchema:
      type: object
      properties:
        query:
          type: string
        limit:
          type: integer
          default: 10
      required:
        - query
    outputSchema:
      type: object
      properties:
        results:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              type:
                type: string
              description:
                type: string
              score:
                type: number

# Data sources
datasources:
  # PostgreSQL catalog backend
  postgres:
    host: localhost
    port: 5432
    database: catalog
    user: datamesh
    # Password should be in environment variable POSTGRES_PASSWORD

# Observability configuration
observability:
  tracing:
    enabled: true
    exporter: otlp
    endpoint: http://localhost:4317
  metrics:
    enabled: true
    endpoint: http://localhost:4317
  logging:
    level: INFO
    format: json
    output: ../../logs/catalog-agent.log

# Caching configuration
cache:
  enabled: true
  ttlSeconds: 300
  maxEntries: 1000
